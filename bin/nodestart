#!/usr/bin/env python

# Copyright (C) 2015 MTA SZTAKI

"""
This script starts a single node using OCCO-CloudHandler and
OCCO-InfraProcessor.

Author: adam.visegradi@sztaki.mta.hu
"""

import occo.util.config as config

def setup_args(cfg):
    cfg.add_argument('node_def')
cfg = config.config(setup_args=setup_args)

import logging
log = logging.getLogger('occo')

#
## Load node definition
#
import yaml
with open(cfg.node_def) as f:
    node_definition = yaml.load(f)

log.debug('Configuration:\n%r', cfg.configuration)
log.debug('Node definition:\n%r', node_definition)

import occo.infobroker
print occo.infobroker.main_info_broker
