'service_composer:chef1':
    context_template: !text_import
        url: file://context_template.txt
'node_def:ocdemo_boinc_server':
    -
        implementation_type: chef+cloudinit
        backend_id: dummy1
        service_composer_id: chef1
        image_id: ami-00001312
        instance_type: m1.medium
        context_template: |
            write_files:
                -   content: {{ variables.password }},{{ variables.owner_address }}
                    owner: root:root
                    path: /tmp/data
                    permissions: '0644'
        run_list: []
'node_def:ocdemo_guse':
    -
        implementation_type: chef+cloudinit
        backend_id: dummy1
        service_composer_id: chef1
        image_id: ami-00001308
        instance_type: m1.medium
        context_template: |
            {{ variables.password }},{{ ibget('node.attribute', 'server', 'fqdn') }},{{ variables.owner_address }}
        run_list: []
'node_def:ocdemo_boinc_client':
    -
        implementation_type: chef+cloudinit
        backend_id: dummy1
        service_composer_id: chef1
        image_id: ami-00001305
        instance_type: m1.medium
        context_template: |
            http://{{ ibget('node.attribute', 'server', 'fqdn') }}/szdgtest/4a4cbeb886378fe65d0fc5871f1a01d8
        run_list: []
'node_def:mysql_server':
    -
        implementation_type: chef+cloudinit
        backend_id: dummy1
        service_composer_id: chef1
        image_id: ami-00001323
        instance_type: m1.medium
        context_template: !text_import
            url: file://mysql_server_context.yaml
        run_list: 
            - recipe[wordpress-app::db]
        attributes:
            mysql:
                server_root_password: '{{ variables.mysql_root_password }}'
            database_management:
                database_name: '{{ variables.mysql_database_name }}'
                dbuser_username: '{{ variables.mysql_dbuser_username }}'
                dbuser_password: '{{ variables.mysql_dbuser_password }}'
'node_def:wordpress':
    -
        implementation_type: chef+cloudinit
        backend_id: dummy1
        service_composer_id: chef1
        image_id: ami-00001323
        instance_type: m1.medium
        context_template: !text_import
            url: file://wordpress_context.yaml
        run_list:
            - recipe[wordpress]
        attributes:
            wordpress:
                db:
                    name: '{{ variables.mysql_database_name }}'
                    user: '{{ variables.mysql_dbuser_username }}'
                    pass: '{{ variables.mysql_dbuser_password }}'
                    host: 'This_should_be_filled_automatically_by_recipe_connect.'
